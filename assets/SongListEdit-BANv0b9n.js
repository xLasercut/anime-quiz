import{ad as M,ae as G,af as B,ag as w,ah as F,ai as j,aj as H,ak as P,X as h,f as u,al as D,am as q,an as Y,ao as K,d as O,ap as i,c as A,e as C,g as Q,w as r,h as L,i as W,aq as X,_ as Z,m as v,l as z,u as J,$ as R,Y as ee,L as U,r as _,Q as te,a7 as ae,a5 as V,Z as le,a0 as I,a1 as se,k as oe,a2 as ue,a4 as ne,S as $,s as ie,a6 as re,V as de}from"./index-DzYDZPMj.js";import{_ as me}from"./TableSrc.vue_vue_type_script_setup_true_lang-DWP5ReNH.js";const ce=G({...Y(),...q(K(),["inline"])},"VCheckbox"),ve=M()({name:"VCheckbox",inheritAttrs:!1,props:ce(),emits:{"update:modelValue":s=>!0,"update:focused":s=>!0},setup(s,c){let{attrs:f,slots:o}=c;const n=B(s,"modelValue"),{isFocused:m,focus:a,blur:d}=w(s),b=F();return j(()=>{const[S,k]=H(f),T=P.filterProps(s),y=h.filterProps(s);return u(P,D({class:["v-checkbox",s.class]},S,T,{modelValue:n.value,"onUpdate:modelValue":g=>n.value=g,id:s.id||`checkbox-${b}`,focused:m.value,style:s.style}),{...o,default:g=>{let{id:N,messagesId:x,isDisabled:l,isReadonly:e,isValid:t}=g;return u(h,D(y,{id:N.value,"aria-describedby":x.value,disabled:l.value,readonly:e.value},k,{error:t.value===!1,modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,onFocus:a,onBlur:d}),o)}})}),{}}}),fe={style:{width:"200px"}},pe=O({__name:"SongListEditTableActions",props:{disabled:{type:Boolean,default:()=>!1},modelValue:{type:String,required:!0}},setup(s){const c=[{text:"Add Songs",value:i.ADD},{text:"Remove Songs",value:i.REMOVE},{text:"None",value:i.NONE}];return(f,o)=>(C(),A(Q,{dense:!0,justify:"space-between"},{default:r(()=>[u(L,{cols:"auto"},{default:r(()=>[W("div",fe,[u(X,{label:"Operation Type",density:"compact","hide-details":!0,variant:"outlined",disabled:s.disabled,items:c,"model-value":s.modelValue,"onUpdate:modelValue":o[0]||(o[0]=n=>f.$emit("update:model-value",n)),"item-value":"value","item-title":"text"},null,8,["disabled","model-value"])])]),_:1}),u(L,{cols:"auto"},{default:r(()=>[u(Z,{disabled:s.modelValue===v(i).NONE||s.disabled,color:"success",icon:"mdi-check",onClick:o[1]||(o[1]=n=>f.$emit("submit:change"))},{default:r(()=>o[2]||(o[2]=[z(" Confirm ")])),_:1,__:[2]},8,["disabled"])]),_:1})]),_:1}))}}),be=O({__name:"SongListEditTable",setup(s){const c=J(),f=[{title:"Anime",key:"animeName",sortable:!1},{title:"Title",key:"songTitle",sortable:!1},{title:"Artist",key:"artist",sortable:!1},{title:"Type",key:"type",sortable:!1},{title:"Source",key:"src",sortable:!1,width:R.TABLE_ACTION_WIDTH}],{currentPage:o,itemsPerPage:n}=ee(U.SONG_LIST_EDIT_TABLE_ITEMS_PER_PAGE),m=_([]),a=_({anime:"",type:Object.values(re),title:"",artist:""}),d=_(i.NONE),b=_(!1);te(()=>d.value,()=>{m.value=[]});const S=ae(()=>c.songList.filter(l=>d.value===i.REMOVE?c.userSongList.includes(l.songId)&&V(a.value.anime,l.animeName.join(","))&&V(a.value.title,l.songTitle)&&V(a.value.artist,l.artist)&&a.value.type.includes(l.type):V(a.value.anime,l.animeName.join(","))&&V(a.value.title,l.songTitle)&&V(a.value.artist,l.artist)&&a.value.type.includes(l.type)));function k(l){return l?"mdi-checkbox-blank-off-outline":"mdi-checkbox-blank-outline"}function T(){return d.value===i.REMOVE?"mdi-minus-box":"mdi-checkbox-marked"}function y(){return d.value===i.REMOVE?"error":"success"}function g(l,e){return b.value||m.value.length>=50&&!e?!0:d.value===i.ADD&&c.userSongList.includes(l)}const N={[i.ADD]:$.ADD_USER_SONGS,[i.REMOVE]:$.REMOVE_USER_SONGS};function x(){if(m.value.length>0){b.value=!0;const l=N[d.value];ie.emit(l,m.value,e=>{b.value=!1,e&&(m.value=[])})}}return(l,e)=>(C(),A(le,{height:v(R).SONG_LIST_EDIT_TABLE_HEIGHT,page:v(o),"onUpdate:page":e[8]||(e[8]=t=>I(o)?o.value=t:null),"items-per-page":v(n),density:"compact",items:S.value,headers:f,"fixed-header":!0,"fixed-footer":!0,"show-select":d.value!==v(i).NONE,modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=t=>m.value=t),"item-value":"songId","no-filter":!0},{"header.data-table-select":r(()=>e[10]||(e[10]=[])),"item.data-table-select":r(({isSelected:t,toggleSelect:p,item:E})=>[u(ve,{"model-value":t({value:E.songId,selectable:!0}),"onUpdate:modelValue":ge=>p({value:E.songId,selectable:!0}),density:"compact","hide-details":"","true-icon":T(),color:y(),disabled:g(E.songId,t({value:E.songId,selectable:!0})),"false-icon":k(g(E.songId,t({value:E.songId,selectable:!0})))},null,8,["model-value","onUpdate:modelValue","true-icon","color","disabled","false-icon"])]),"item.animeName":r(({item:t})=>[u(ne,{song:t},null,8,["song"])]),"item.src":r(({item:t})=>[u(me,{song:t},null,8,["song"])]),top:r(()=>[u(oe,{fluid:!0},{default:r(()=>[u(ue,{anime:a.value.anime,"onUpdate:anime":e[0]||(e[0]=t=>a.value.anime=t),title:a.value.title,"onUpdate:title":e[1]||(e[1]=t=>a.value.title=t),artist:a.value.artist,"onUpdate:artist":e[2]||(e[2]=t=>a.value.artist=t),type:a.value.type,"onUpdate:type":e[3]||(e[3]=t=>a.value.type=t)},null,8,["anime","title","artist","type"]),u(pe,{disabled:b.value,modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=t=>d.value=t),"onSubmit:change":e[5]||(e[5]=t=>x())},null,8,["disabled","modelValue"])]),_:1})]),bottom:r(({pageCount:t})=>[u(se,{"current-page":v(o),"onUpdate:currentPage":e[6]||(e[6]=p=>I(o)?o.value=p:null),"items-per-page":v(n),"onUpdate:itemsPerPage":e[7]||(e[7]=p=>I(n)?n.value=p:null),length:t,"local-storage-key":v(U).SONG_LIST_EDIT_TABLE_ITEMS_PER_PAGE},null,8,["current-page","items-per-page","length","local-storage-key"])]),_:1},8,["height","page","items-per-page","items","show-select","modelValue"]))}}),_e=O({__name:"SongListEdit",setup(s){return(c,f)=>(C(),A(de,{variant:"flat"},{default:r(()=>[u(be)]),_:1}))}});export{_e as default};
