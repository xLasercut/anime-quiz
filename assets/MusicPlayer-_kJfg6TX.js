import{d as E,r as p,Q as I,c,e as P,h as y,w as o,f as u,g as C,T as R,U as M,W as G,l as L,t as V,X as Y,a as H,i as B,I as z,u as F,Y as Q,o as W,Z as X,m as $,$ as Z,a0 as w,a1 as J,L as j,k as K,a2 as _,a3 as h,a4 as ee,a5 as D,a6 as q,V as te}from"./index-DzYDZPMj.js";const ne=E({__name:"MusicPlayerTablePlayerControls",props:{duration:{required:!0,type:Number},currentTime:{required:!0,type:Number},playing:{required:!0,type:Boolean},shuffle:{required:!0,type:Boolean}},emits:["seek","previous","play","pause","next","update:shuffle"],setup(v,{emit:S}){const g=v,d=p(g.currentTime),f=p(!1);I(()=>g.currentTime,t=>{f.value||(d.value=t)});function s(t){return t<3600?new Date(t*1e3).toISOString().substring(14,19):new Date(t*1e3).toISOString().substring(11,16)}return(t,l)=>(P(),c(y,null,{default:o(()=>[u(C,{justify:"center"},{default:o(()=>[u(y,{cols:"auto"},{default:o(()=>[u(M,{icon:"mdi-skip-backward",variant:"flat",color:"primary",onClick:l[0]||(l[0]=i=>t.$emit("previous"))})]),_:1}),v.playing?R("",!0):(P(),c(y,{key:0,cols:"auto"},{default:o(()=>[u(M,{icon:"mdi-play",variant:"flat",color:"success",onClick:l[1]||(l[1]=i=>t.$emit("play"))})]),_:1})),v.playing?(P(),c(y,{key:1,cols:"auto"},{default:o(()=>[u(M,{icon:"mdi-pause",variant:"flat",color:"warning",onClick:l[2]||(l[2]=i=>t.$emit("pause"))})]),_:1})):R("",!0),u(y,{cols:"auto"},{default:o(()=>[u(M,{icon:"mdi-skip-forward",variant:"flat",color:"primary",onClick:l[3]||(l[3]=i=>t.$emit("next"))})]),_:1})]),_:1}),u(C,{justify:"center"},{default:o(()=>[u(y,{cols:"10"},{default:o(()=>[u(G,{min:0,max:v.duration,"model-value":d.value,onMousedown:l[4]||(l[4]=i=>f.value=!0),onMouseup:l[5]||(l[5]=i=>f.value=!1),"hide-details":!0,"thumb-label":!0,"thumb-size":20,color:"warning",onEnd:l[6]||(l[6]=i=>t.$emit("seek",i))},{"thumb-label":o(({modelValue:i})=>[L(V(s(i)),1)]),_:1},8,["max","model-value"])]),_:1})]),_:1}),u(C,{justify:"center"},{default:o(()=>[L(V(s(v.currentTime))+" / "+V(s(v.duration)),1)]),_:1}),u(C,{justify:"center"},{default:o(()=>[u(y,{cols:"auto"},{default:o(()=>[u(Y,{"true-icon":"mdi-shuffle","false-icon":"mdi-shuffle-disabled",color:"info","base-color":"primary",density:"compact","model-value":v.shuffle,"onUpdate:modelValue":l[7]||(l[7]=i=>t.$emit("update:shuffle",i))},null,8,["model-value"])]),_:1})]),_:1})]),_:1}))}}),ae={class:"music-player-container"},le=["src","currentTime","volume"],ue=E({__name:"MusicPlayerTablePlayer",props:{song:{required:!0,type:Object},shuffle:{required:!0,type:Boolean}},emits:["next","previous","play","set-initial-song","update:shuffle"],setup(v,{emit:S}){const g=v,d=S,f=H(),s=p(null),t=p(0),l=p(-1),i=p(!1),T=p(!1),b=p(f.volume);I(()=>f.volume,m=>{b.value=m}),I(()=>T.value,m=>{m&&d("next")});function N(){return f.audioOnly&&g.song.audioSrc?g.song.audioSrc:g.song.src}function k(m){t.value=m.detail.currentTime}function A(m){l.value=m.detail}function U(){g.song.songId?(s.value.volume=f.volume/100,s.value.play()):d("set-initial-song")}function O(){s.value.pause()}return(m,a)=>(P(),c(C,{dense:!0},{default:o(()=>[u(y,{cols:"auto"},{default:o(()=>[B("div",ae,[B("media-player",{ref_key:"player",ref:s,autoplay:"",src:N(),currentTime:t.value,onPause:a[0]||(a[0]=e=>i.value=!1),onPlay:a[1]||(a[1]=e=>i.value=!0),volume:b.value/100,onEnded:a[2]||(a[2]=e=>T.value=!0),onSourceChange:a[3]||(a[3]=e=>T.value=!1),onTimeUpdate:a[4]||(a[4]=e=>k(e)),onDurationChange:a[5]||(a[5]=e=>A(e)),load:"eager"},a[12]||(a[12]=[B("media-provider",null,null,-1)]),40,le)])]),_:1}),u(ne,{onSeek:a[6]||(a[6]=e=>t.value=e),"current-time":t.value,duration:l.value,onPause:a[7]||(a[7]=e=>O()),onPlay:a[8]||(a[8]=e=>U()),playing:i.value,onNext:a[9]||(a[9]=e=>m.$emit("next")),onPrevious:a[10]||(a[10]=e=>m.$emit("previous")),shuffle:v.shuffle,"onUpdate:shuffle":a[11]||(a[11]=e=>m.$emit("update:shuffle",e))},null,8,["current-time","duration","playing","shuffle"])]),_:1}))}}),ie=z(ue,[["__scopeId","data-v-600a19a7"]]),re=E({__name:"MusicPlayerTable",setup(v){const S=F(),g=[{title:"Anime",key:"animeName",sortable:!1},{title:"Title",key:"songTitle",sortable:!1},{title:"Artist",key:"artist",sortable:!1},{title:"Type",key:"type",sortable:!1},{title:"Action",key:"action",sortable:!1,width:"60px"}],{currentPage:d,itemsPerPage:f}=Q(j.MUSIC_PLAYER_TABLE_ITEMS_PER_PAGE),s=p({songId:"",src:"",type:q.OP,songTitle:"",artist:"",animeName:[],animeId:[],audioSrc:""}),t=p({anime:"",title:"",artist:"",type:Object.values(q)}),l=p(!0),i=p([]);I(()=>s.value,e=>{const n=i.value.indexOf(e);d.value=Math.floor(n/f.value)+1}),I(()=>[t.value.anime,t.value.title,t.value.artist,t.value.type],()=>{T()});function T(){i.value=S.songList.filter(e=>S.userSongList.includes(e.songId)&&D(t.value.anime,e.animeName.join(","))&&D(t.value.title,e.songTitle)&&D(t.value.artist,e.artist)&&t.value.type.includes(e.type))}function b(e){return s.value.songId===e.songId}function N(e){return b(e)?"primary":"success"}function k(e){const n=Math.floor(Math.random()*e.length);return e[n]}function A(e){if(l.value)return k(e);const n=e.indexOf(s.value);return n>=e.length-1?e[0]:e[n+1]}function U(e){if(l.value)return k(e);const n=e.indexOf(s.value);return n<=0?e[e.length-1]:e[n-1]}function O(){const e=i.value;e.length<=0||(s.value=A(e))}function m(){const e=i.value;e.length<=0||(s.value=U(e))}function a(){const e=i.value;if(!(e.length<=0)){if(l.value){s.value=k(e);return}s.value=e[0]}}return W(()=>{T()}),(e,n)=>(P(),c(X,{headers:g,items:i.value,"fixed-header":!0,"fixed-footer":!0,density:"compact",page:$(d),"onUpdate:page":n[10]||(n[10]=r=>w(d)?d.value=r:null),"items-per-page":$(f),height:$(Z).MUSIC_PLAYER_TABLE_HEIGHT,"no-filter":!0},{"item.animeName":o(({item:r})=>[u(ee,{song:r},null,8,["song"])]),"item.action":o(({item:r})=>[u(h,{icon:"mdi-play-box",color:N(r),onClick:x=>s.value=r,disabled:b(r)},null,8,["color","onClick","disabled"])]),top:o(()=>[u(K,{fluid:!0},{default:o(()=>[u(ie,{song:s.value,onNext:n[0]||(n[0]=r=>O()),onPrevious:n[1]||(n[1]=r=>m()),onSetInitialSong:n[2]||(n[2]=r=>a()),shuffle:l.value,"onUpdate:shuffle":n[3]||(n[3]=r=>l.value=r)},null,8,["song","shuffle"]),u(_,{anime:t.value.anime,"onUpdate:anime":n[4]||(n[4]=r=>t.value.anime=r),animeModifiers:{trim:!0},title:t.value.title,"onUpdate:title":n[5]||(n[5]=r=>t.value.title=r),titleModifiers:{trim:!0},artist:t.value.artist,"onUpdate:artist":n[6]||(n[6]=r=>t.value.artist=r),artistModifiers:{trim:!0},type:t.value.type,"onUpdate:type":n[7]||(n[7]=r=>t.value.type=r),typeModifiers:{trim:!0}},null,8,["anime","title","artist","type"])]),_:1})]),bottom:o(({pageCount:r})=>[u(J,{"current-page":$(d),"onUpdate:currentPage":n[8]||(n[8]=x=>w(d)?d.value=x:null),"items-per-page":$(f),"onUpdate:itemsPerPage":n[9]||(n[9]=x=>w(f)?f.value=x:null),length:r,"local-storage-key":$(j).MUSIC_PLAYER_TABLE_ITEMS_PER_PAGE},null,8,["current-page","items-per-page","length","local-storage-key"])]),_:1},8,["items","page","items-per-page","height"]))}}),se=E({__name:"MusicPlayer",setup(v){return(S,g)=>(P(),c(te,{variant:"flat"},{default:o(()=>[u(re)]),_:1}))}});export{se as default};
