import{d as y,a as P,u as k,B as G,i as b,$ as R,L as g,r as U,a0 as B,a9 as E,e as c,c as v,w as i,f as l,a1 as $,a3 as M,k as V,m as o,a4 as S,a5 as x,a6 as f,a7 as h,q as j,a8 as _,aa as I,D as A,s as w,S as H,V as q}from"./index-BAK_NbG2.js";import{_ as F}from"./TableAction.vue_vue_type_script_setup_true_lang-eiffnwHF.js";const K=y({__name:"SongStatsEditTable",setup(D){const m=P(),u=k(),d=G(),T=b(j.OPEN_DIALOG),{currentPage:n,itemsPerPage:p}=R(g.SONG_STATS_EDIT_TABLE_ITEMS_PER_PAGE),a=U({anime:"",type:Object.values(B),title:"",artist:""}),N=E(()=>{const s=[{title:"Anime",key:"animeName",sortable:!1},{title:"Title",key:"songTitle",sortable:!1},{title:"Artist",key:"artist",sortable:!1},{title:"Type",key:"type",sortable:!1},{title:"Play Count",key:"playCount",sortable:!0}];return m.clientData.admin&&s.push({title:"Action",key:"action",sortable:!1,width:f.TABLE_ACTION_WIDTH}),s}),C=E(()=>{const s=[];for(const t of u.songList)t.songId in u.songStatsRecords&&_(a.value.anime,t.animeName.join(","))&&_(a.value.title,t.songTitle)&&_(a.value.artist,t.artist)&&a.value.type.includes(t.type)&&s.push({...t,playCount:u.songStatsRecords[t.songId]});return s});function O(s){d.updateSongStatsInEdit({songId:s.songId,playCount:s.playCount}),d.updateEditMode(I.EDIT),T(A.SONG_STATS_EDIT,"Edit Song Stats")}function L(s){d.updateSongStatsInEdit({songId:s.songId,playCount:s.playCount}),d.updateEditMode(I.DELETE),T(A.SONG_STATS_EDIT,"Delete Song Stats")}return(s,t)=>(c(),v(h,{headers:N.value,items:C.value,page:o(n),"onUpdate:page":t[6]||(t[6]=e=>S(n)?n.value=e:null),"items-per-page":o(p),height:o(f).ADMIN_TABLE_HEIGHT,"fixed-header":!0,"fixed-footer":!0,density:"compact","no-filter":!0},{"item.animeName":i(({item:e})=>[l($,{song:e},null,8,["song"])]),"item.action":i(({item:e})=>[l(F,{"onItem:edit":r=>O(e),"onItem:delete":r=>L(e)},null,8,["onItem:edit","onItem:delete"])]),top:i(()=>[l(V,{fluid:!0},{default:i(()=>[l(M,{anime:a.value.anime,"onUpdate:anime":t[0]||(t[0]=e=>a.value.anime=e),title:a.value.title,"onUpdate:title":t[1]||(t[1]=e=>a.value.title=e),artist:a.value.artist,"onUpdate:artist":t[2]||(t[2]=e=>a.value.artist=e),type:a.value.type,"onUpdate:type":t[3]||(t[3]=e=>a.value.type=e)},null,8,["anime","title","artist","type"])]),_:1})]),bottom:i(({pageCount:e})=>[l(x,{"current-page":o(n),"onUpdate:currentPage":t[4]||(t[4]=r=>S(n)?n.value=r:null),"items-per-page":o(p),"onUpdate:itemsPerPage":t[5]||(t[5]=r=>S(p)?p.value=r:null),length:e,"local-storage-key":o(g).SONG_STATS_EDIT_TABLE_ITEMS_PER_PAGE},null,8,["current-page","items-per-page","length","local-storage-key"])]),_:1},8,["headers","items","page","items-per-page","height"]))}}),z=y({__name:"SongStatsEdit",setup(D){return w.emit(H.UPDATE_STORE_SONG_STATS_RECORDS),(m,u)=>(c(),v(q,{variant:"flat"},{default:i(()=>[l(K)]),_:1}))}});export{z as default};
